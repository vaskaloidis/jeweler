console.log("Saving Task Inline JS ERB")

if ($("#success_message").is(':visible')) {
    $("#success_message").html('');
    $("#success_message").hide('slide');
}

if ($("#error_message").is(':visible')) {
    $("#error_message").html('');
    $("#error_message").hide('slide');
}

$("#invoice_items_<%= @invoice.id.to_s %>_hidden_row").hide();

<% if @task.valid? %>

  $("#invoice_panel_<%= @invoice.id.to_s %>_container").html('<%= escape_javascript( render 'invoices/invoice_panel', invoice: @invoice, sprint: @current_sprint ) %>');
  $("#success_message").show();
  $("#success_message").html('Task Created Successfully');

<% else %>

  <% #TODO: Log this error also %>
  $("#error_message").show()
  $("#error_message").html('Your Task Could Not Be Created');

<% end %>

<%# NEW: render 'invoices/invoice_panel', invoice: invoice, sprint: count %>
<%# OLD: render('invoice_items/inline_item', invoice: @invoice) %>
<%# DOCS: $("#items_grid").html("<%= escape_javascript(render partial: 'items_list', locals: { items: @selected } ) %>