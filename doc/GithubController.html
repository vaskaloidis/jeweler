<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: GithubController
  
    &mdash; Documentation by YARD 0.9.14
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "GithubController";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (G)</a> &raquo;
    
    
    <span class="title">GithubController</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: GithubController
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActionController::Base</li>
          
            <li class="next"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></li>
          
            <li class="next">GithubController</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/controllers/github_controller.rb</dd>
  </dl>
  
</div>








  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authorize_account-instance_method" title="#authorize_account (instance method)">#<strong>authorize_account</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Redirect to GitHub Auth Page for Oauth Token GET /github_authorize.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hook-instance_method" title="#hook (instance method)">#<strong>hook</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>GitHub WebHook Push Event endpoint POST /github_hook TODO: Move this to a
delayed job TODO: Build a Service Object Build a GitHubPushEvent Model.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#install_webhook-instance_method" title="#install_webhook (instance method)">#<strong>install_webhook</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Install GitHub Push Hook (Internal) AJAX:GET
/github_install_webhook/:project_id.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_oauth-instance_method" title="#save_oauth (instance method)">#<strong>save_oauth</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Save Authenticated GitHub user Oauth Token GET /github_oauth.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="authorize_account-instance_method">
  
    #<strong>authorize_account</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Redirect to GitHub Auth Page for Oauth Token GET /github_authorize</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/github_controller.rb', line 166</span>

<span class='kw'>def</span> <span class='id identifier rubyid_authorize_account'>authorize_account</span>
  <span class='id identifier rubyid_auth_url'>auth_url</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="GitHubApp.html" title="GitHubApp (class)">GitHubApp</a></span></span><span class='period'>.</span><span class='id identifier rubyid_authorization_url'><span class='object_link'><a href="GitHubApp.html#authorization_url-class_method" title="GitHubApp.authorization_url (method)">authorization_url</a></span></span>
  <span class='id identifier rubyid_respond_to'>respond_to</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_format'>format</span><span class='op'>|</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_html'>html</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_auth_url'>auth_url</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hook-instance_method">
  
    #<strong>hook</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>GitHub WebHook Push Event endpoint POST /github_hook TODO: Move this to a
delayed job TODO: Build a Service Object Build a GitHubPushEvent Model</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/github_controller.rb', line 17</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hook'>hook</span>
  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Executing GitHub Webhook</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_payload'>payload</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span>
  <span class='comment'># payload = ActiveSupport::JSON.decode(response.body)
</span>
  <span class='id identifier rubyid_commits'>commits</span> <span class='op'>=</span> <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>commits</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_notes'>notes</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_commits'>commits</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_commits'>commits</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_commit'>commit</span><span class='op'>|</span>

      <span class='id identifier rubyid_sha'>sha</span> <span class='op'>=</span> <span class='id identifier rubyid_commit'>commit</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

      <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Commit SHA: </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_sha'>sha</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_commit_message'>commit_message</span> <span class='op'>=</span> <span class='id identifier rubyid_commit'>commit</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>message</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

      <span class='id identifier rubyid_hide_message'>hide_message</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id identifier rubyid_custom_message'>custom_message</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id identifier rubyid_commands'>commands</span> <span class='op'>=</span> <span class='id identifier rubyid_commit_message'>commit_message</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#jeweler</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

      <span class='id identifier rubyid_commands'>commands</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='id identifier rubyid_count'>count</span><span class='op'>|</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>0</span>
          <span class='id identifier rubyid_pounds'>pounds</span> <span class='op'>=</span> <span class='id identifier rubyid_command'>command</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>#</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
          <span class='id identifier rubyid_second'>second</span> <span class='op'>=</span> <span class='id identifier rubyid_pounds'>pounds</span><span class='period'>.</span><span class='id identifier rubyid_second'>second</span>
          <span class='id identifier rubyid_third'>third</span> <span class='op'>=</span> <span class='id identifier rubyid_pounds'>pounds</span><span class='period'>.</span><span class='id identifier rubyid_third'>third</span>
          <span class='id identifier rubyid_fourth'>fourth</span> <span class='op'>=</span> <span class='id identifier rubyid_pounds'>pounds</span><span class='period'>.</span><span class='id identifier rubyid_fourth'>fourth</span>

          <span class='kw'>if</span> <span class='id identifier rubyid_second'>second</span><span class='period'>.</span><span class='id identifier rubyid_starts_with?'>starts_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>task</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_sprint'>sprint</span> <span class='op'>=</span> <span class='id identifier rubyid_second'>second</span>
            <span class='id identifier rubyid_sprint'>sprint</span><span class='period'>.</span><span class='id identifier rubyid_slice!'>slice!</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>task</span><span class='tstring_end'>&#39;</span></span>
            <span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='id identifier rubyid_sprint'>sprint</span><span class='period'>.</span><span class='id identifier rubyid_slice!'>slice!</span><span class='lparen'>(</span><span class='id identifier rubyid_sprint'>sprint</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='op'>...</span><span class='id identifier rubyid_sprint'>sprint</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>

            <span class='kw'>if</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>complete</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>or</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>completed</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>or</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>finished</span><span class='tstring_end'>&#39;</span></span>

            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>current</span><span class='tstring_end'>&#39;</span></span>

            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hours</span><span class='tstring_end'>&#39;</span></span>

            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>estimate</span><span class='tstring_end'>&#39;</span></span>

            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>incomplete</span><span class='tstring_end'>&#39;</span></span>

            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>in-progress</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>or</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>started</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>testing</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>reviewing</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>or</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>review</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>end</span>
          <span class='kw'>elsif</span> <span class='id identifier rubyid_second'>second</span><span class='period'>.</span><span class='id identifier rubyid_starts_with?'>starts_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sprint</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='id identifier rubyid_sprint'>sprint</span> <span class='op'>=</span> <span class='id identifier rubyid_second'>second</span>
            <span class='id identifier rubyid_sprint'>sprint</span><span class='period'>.</span><span class='id identifier rubyid_slice!'>slice!</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sprint</span><span class='tstring_end'>&#39;</span></span>
            <span class='kw'>if</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>current</span><span class='tstring_end'>&#39;</span></span>

            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>open</span><span class='tstring_end'>&#39;</span></span>

            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>close</span><span class='tstring_end'>&#39;</span></span>

            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>request-payment</span><span class='tstring_end'>&#39;</span></span>

            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>send-invoice</span><span class='tstring_end'>&#39;</span></span>

            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>send-estimate</span><span class='tstring_end'>&#39;</span></span>

            <span class='kw'>end</span>
          <span class='kw'>elsif</span> <span class='id identifier rubyid_second'>second</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>commit</span><span class='tstring_end'>&#39;</span></span>

            <span class='kw'>if</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hide-message</span><span class='tstring_end'>&#39;</span></span>
              <span class='id identifier rubyid_hide_message'>hide_message</span> <span class='op'>=</span> <span class='kw'>true</span>
            <span class='kw'>elsif</span> <span class='id identifier rubyid_third'>third</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>message</span><span class='tstring_end'>&#39;</span></span>
              <span class='id identifier rubyid_custom_message'>custom_message</span> <span class='op'>=</span> <span class='id identifier rubyid_fourth'>fourth</span>
            <span class='kw'>end</span>


          <span class='kw'>end</span>

        <span class='kw'>end</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_diff_url'>diff_url</span> <span class='op'>=</span> <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>compare</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
      <span class='comment'># message = message + &#39;&lt;br&gt;&lt;a href=&quot;&#39; + payload[&quot;compare&quot;] + &#39;&quot;&gt;View Commit&lt;/a&gt;&#39;
</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_commit'>commit</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>added</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;br&gt; &lt;strong&gt;Files Added:&lt;/strong&gt;&lt;br&gt;</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_commit'>commit</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>added</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
          <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>+</span> <span class='id identifier rubyid_file'>file</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;br&gt;</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_commit'>commit</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>removed</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;br&gt; &lt;strong&gt;Files Removed:&lt;/strong&gt;&lt;br&gt;</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_commit'>commit</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>removed</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
          <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>+</span> <span class='id identifier rubyid_file'>file</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;br&gt;</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='kw'>unless</span> <span class='id identifier rubyid_commit'>commit</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>modified</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;br&gt; &lt;strong&gt;Modified:&lt;/strong&gt;&lt;br&gt;</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_commit'>commit</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>modified</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
          <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span> <span class='op'>+</span> <span class='id identifier rubyid_file'>file</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>&lt;br&gt;</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>

      <span class='comment'># Head_Commit for Author Name
</span>      <span class='comment'># head_commit = payload[&quot;head_commit&quot;]
</span>      <span class='comment'># author = head_commit[&quot;author&quot;]
</span>      <span class='comment'># author_name = author[&quot;name&quot;]
</span>
      <span class='id identifier rubyid_repository'>repository</span> <span class='op'>=</span> <span class='id identifier rubyid_payload'>payload</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>repository</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_repo_url'>repo_url</span> <span class='op'>=</span> <span class='id identifier rubyid_repository'>repository</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html_url</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Repository URL: </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_repo_url'>repo_url</span><span class='rparen'>)</span>

      <span class='ivar'>@project</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Project.html" title="Project (class)">Project</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>github_url:</span> <span class='id identifier rubyid_repo_url'>repo_url</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
      <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Project Name: </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='ivar'>@project</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_note'>note</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Note.html" title="Note (class)">Note</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
      <span class='id identifier rubyid_note'>note</span><span class='period'>.</span><span class='id identifier rubyid_author'>author</span> <span class='op'>=</span> <span class='ivar'>@project</span><span class='period'>.</span><span class='id identifier rubyid_owner'>owner</span>
      <span class='id identifier rubyid_note'>note</span><span class='period'>.</span><span class='id identifier rubyid_note_type'>note_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>commit</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_note'>note</span><span class='period'>.</span><span class='id identifier rubyid_git_commit_id'>git_commit_id</span> <span class='op'>=</span> <span class='id identifier rubyid_sha'>sha</span>
      <span class='id identifier rubyid_note'>note</span><span class='period'>.</span><span class='id identifier rubyid_sync'>sync</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_note'>note</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span> <span class='op'>=</span> <span class='ivar'>@project</span>
      <span class='id identifier rubyid_note'>note</span><span class='period'>.</span><span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='id identifier rubyid_message'>message</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>

      <span class='kw'>unless</span> <span class='id identifier rubyid_diff_url'>diff_url</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='kw'>or</span> <span class='id identifier rubyid_diff_url'>diff_url</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
        <span class='id identifier rubyid_note'>note</span><span class='period'>.</span><span class='id identifier rubyid_commit_diff_path'>commit_diff_path</span> <span class='op'>=</span> <span class='id identifier rubyid_diff_url'>diff_url</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
      <span class='kw'>end</span>
      <span class='kw'>unless</span> <span class='ivar'>@project</span><span class='period'>.</span><span class='id identifier rubyid_current_sprint'>current_sprint</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_note'>note</span><span class='period'>.</span><span class='id identifier rubyid_sprint'>sprint</span> <span class='op'>=</span> <span class='ivar'>@project</span><span class='period'>.</span><span class='id identifier rubyid_current_sprint'>current_sprint</span>
      <span class='kw'>end</span>
      <span class='kw'>unless</span> <span class='ivar'>@project</span><span class='period'>.</span><span class='id identifier rubyid_current_task'>current_task</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_note'>note</span><span class='period'>.</span><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='ivar'>@project</span><span class='period'>.</span><span class='id identifier rubyid_current_task'>current_task</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_note'>note</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
      <span class='id identifier rubyid_notes'>notes</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_note'>note</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_respond_to'>respond_to</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_format'>format</span><span class='op'>|</span>
    <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_json'>json</span> <span class='lbrace'>{</span><span class='id identifier rubyid_render'>render</span> <span class='label'>json:</span> <span class='id identifier rubyid_notes'>notes</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="install_webhook-instance_method">
  
    #<strong>install_webhook</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Install GitHub Push Hook (Internal) AJAX:GET
/github_install_webhook/:project_id</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/github_controller.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_install_webhook'>install_webhook</span>
  <span class='const'><span class='object_link'><a href="GitHubOauth.html" title="GitHubOauth (class)">GitHubOauth</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="GitHubOauth.html#initialize-instance_method" title="GitHubOauth#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='ivar'>@project</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_install_webhook!'><span class='object_link'><a href="GitHubOauth.html#install_webhook!-instance_method" title="GitHubOauth#install_webhook! (method)">install_webhook!</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_oauth-instance_method">
  
    #<strong>save_oauth</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Save Authenticated GitHub user Oauth Token GET /github_oauth</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/controllers/github_controller.rb', line 175</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_oauth'>save_oauth</span>
  <span class='id identifier rubyid_authorization_code'>authorization_code</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:code</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_access_token'>access_token</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="GitHubApp.html" title="GitHubApp (class)">GitHubApp</a></span></span><span class='period'>.</span><span class='id identifier rubyid_api'><span class='object_link'><a href="GitHubApp.html#api-class_method" title="GitHubApp.api (method)">api</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get_token'>get_token</span><span class='lparen'>(</span> <span class='id identifier rubyid_authorization_code'>authorization_code</span> <span class='rparen'>)</span>
  <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="User.html" title="User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_current_user'>current_user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='label'>oauth:</span> <span class='id identifier rubyid_access_token'>access_token</span><span class='period'>.</span><span class='id identifier rubyid_token'>token</span><span class='rparen'>)</span>

  <span class='comment'># Eventually we want to do this here too
</span>  <span class='comment'>#  but we don&#39;t have information about project_id here
</span>  <span class='comment'>#  unless we pass it to GitHub first when we go to authorize
</span>  <span class='comment'>#  the GitHub Account
</span>  <span class='comment'># gho = GitHubOauth.new(@project)
</span>  <span class='comment'># gho.install_webhook!
</span>
  <span class='id identifier rubyid_respond_to'>respond_to</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_format'>format</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_valid?'>valid?</span>
      <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_html'>html</span> <span class='lbrace'>{</span><span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_root_path'>root_path</span><span class='comma'>,</span> <span class='label'>notice:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>GitHub Account Successfully Authenticated!</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_format'>format</span><span class='period'>.</span><span class='id identifier rubyid_html'>html</span> <span class='lbrace'>{</span><span class='id identifier rubyid_redirect_to'>redirect_to</span> <span class='id identifier rubyid_root_path'>root_path</span><span class='comma'>,</span> <span class='symbol'>:flash</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:error</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Error Authenticated GitHub Authenticated.</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Jun 19 12:03:52 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.14 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>